# -*- mode: python -*-

Import('env')
Import('get_option')

env.Library(
    target="cryptd_commands",
    source=[
        "commands/cryptd_buildinfo.cpp",
        "commands/cryptd_ismaster.cpp",
        env.Idlc("commands/cryptd_commands.idl")[0],
        "commands/cryptd_is_encryption_needed.cpp",
    ],
    LIBDEPS_PRIVATE=[
        '$BUILD_DIR/mongo/db/commands',
        '$BUILD_DIR/mongo/db/commands/test_commands_enabled',
        '$BUILD_DIR/mongo/db/wire_version',
        '$BUILD_DIR/mongo/idl/idl_parser',
        '$BUILD_DIR/mongo/util/version_impl',
        'cryptd_markings',
    ],
)

env.Library(
    target="cryptd_markings",
    source=[
        "markings/markings.cpp",
    ],
)

env.CppUnitTest(
    target='fle_test',
    source=[
        'markings/fle_test.cpp',
    ],
    LIBDEPS_PRIVATE=[
        'cryptd_markings',
    ],
)
